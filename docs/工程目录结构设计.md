# MagnetDownload å·¥ç¨‹ç›®å½•ç»“æ„è®¾è®¡

## ğŸ“š å‚è€ƒçš„å¼€æºé¡¹ç›®æƒ¯ä¾‹

### 1. Chromium é¡¹ç›®
```
third_party/
â”œâ”€â”€ cef/
â”‚   â”œâ”€â”€ win64/
â”‚   â”œâ”€â”€ linux64/
â”‚   â””â”€â”€ mac/
```

### 2. Qt é¡¹ç›®
```
3rdparty/
â”œâ”€â”€ chromium/
â”‚   â”œâ”€â”€ windows_x64/
â”‚   â”œâ”€â”€ linux_x64/
â”‚   â””â”€â”€ macos_x64/
```

### 3. Unreal Engine
```
ThirdParty/
â”œâ”€â”€ CEF3/
â”‚   â”œâ”€â”€ Win64/
â”‚   â”œâ”€â”€ Linux/
â”‚   â””â”€â”€ Mac/
```

---

## ğŸ¯ æ¨èçš„æ ‡å‡†ç»“æ„ï¼ˆè·¨å¹³å°ï¼‰

```
MagnetDownload/
â”œâ”€â”€ 3rd/                              # ç¬¬ä¸‰æ–¹åº“ (Third-party libraries)
â”‚   â”œâ”€â”€ cef/                          # CEF é¢„ç¼–è¯‘äºŒè¿›åˆ¶
â”‚   â”‚   â”œâ”€â”€ win64/                    # Windows 64-bit
â”‚   â”‚   â”‚   â”œâ”€â”€ Release/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ libcef.dll
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚   â”œâ”€â”€ Debug/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ libcef.dll
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚   â”œâ”€â”€ Resources/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ locales/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ *.pak
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ icudtl.dat
â”‚   â”‚   â”‚   â”œâ”€â”€ include/              # å¤´æ–‡ä»¶ï¼ˆæ‰€æœ‰å¹³å°å…±äº«ï¼‰
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ *.h
â”‚   â”‚   â”‚   â””â”€â”€ libcef_dll/           # wrapper æºç 
â”‚   â”‚   â”‚       â””â”€â”€ *.cc, *.h
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ linux64/                  # Linux 64-bit (æœªæ¥)
â”‚   â”‚   â”‚   â”œâ”€â”€ Release/
â”‚   â”‚   â”‚   â”œâ”€â”€ Debug/
â”‚   â”‚   â”‚   â””â”€â”€ Resources/
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ macos/                    # macOS (æœªæ¥)
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ README.md                 # CEF ç‰ˆæœ¬è¯´æ˜
â”‚   â”‚
â”‚   â”œâ”€â”€ json/                         # nlohmann/json (header-only)
â”‚   â”‚   â””â”€â”€ single_include/
â”‚   â”‚       â””â”€â”€ nlohmann/
â”‚   â”‚           â””â”€â”€ json.hpp
â”‚   â”‚
â”‚   â”œâ”€â”€ asio/                         # Asio (header-only)
â”‚   â”‚   â””â”€â”€ include/
â”‚   â”‚       â””â”€â”€ asio.hpp
â”‚   â”‚
â”‚   â””â”€â”€ googletest/                   # Google Test
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ cmake/                            # CMake è„šæœ¬
â”‚   â”œâ”€â”€ FindCEF.cmake                 # è‡ªåŠ¨æ£€æµ‹å¹³å°å¹¶æŸ¥æ‰¾ CEF
â”‚   â”œâ”€â”€ Macros.cmake
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ include/                          # é¡¹ç›®å…¬å…±å¤´æ–‡ä»¶
â”‚   â””â”€â”€ magnet/
â”‚       â”œâ”€â”€ application/
â”‚       â”œâ”€â”€ protocols/
â”‚       â””â”€â”€ ...
â”‚
â”œâ”€â”€ src/                              # é¡¹ç›®æºç 
â”‚   â”œâ”€â”€ gui/                          # GUI å±‚ (CEF)
â”‚   â”‚   â”œâ”€â”€ CMakeLists.txt
â”‚   â”‚   â”œâ”€â”€ common/                   # è·¨å¹³å°å…¬å…±ä»£ç 
â”‚   â”‚   â”‚   â”œâ”€â”€ cef_app.h/cpp
â”‚   â”‚   â”‚   â”œâ”€â”€ cef_client.h/cpp
â”‚   â”‚   â”‚   â””â”€â”€ message_handler.h/cpp
â”‚   â”‚   â”œâ”€â”€ win/                      # Windows ç‰¹å®šä»£ç 
â”‚   â”‚   â”‚   â””â”€â”€ main_win.cpp
â”‚   â”‚   â”œâ”€â”€ linux/                    # Linux ç‰¹å®šä»£ç  (æœªæ¥)
â”‚   â”‚   â”‚   â””â”€â”€ main_linux.cpp
â”‚   â”‚   â””â”€â”€ mac/                      # macOS ç‰¹å®šä»£ç  (æœªæ¥)
â”‚   â”‚       â””â”€â”€ main_mac.mm
â”‚   â”‚
â”‚   â”œâ”€â”€ application/
â”‚   â”œâ”€â”€ protocols/
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ web-ui/                           # å‰ç«¯é¡¹ç›® (Vue 3)
â”‚   â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ public/
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ build/                            # æ„å»ºè¾“å‡º (git ignored)
â”‚   â”œâ”€â”€ win64/
â”‚   â”‚   â”œâ”€â”€ Debug/
â”‚   â”‚   â””â”€â”€ Release/
â”‚   â”œâ”€â”€ linux64/
â”‚   â””â”€â”€ macos/
â”‚
â”œâ”€â”€ docs/                             # æ–‡æ¡£
â”œâ”€â”€ tests/                            # æµ‹è¯•
â””â”€â”€ CMakeLists.txt                    # æ ¹ CMake
```

---

## ğŸ”§ å…·ä½“è°ƒæ•´æ–¹æ¡ˆ

### å½“å‰çŠ¶æ€
```
3rd/cef/cef_binary_143.0.14+gdd46a37+chromium-143.0.7499.193_windows64/
```

### è°ƒæ•´ä¸º
```
3rd/cef/win64/
```

### æ“ä½œæ­¥éª¤

1. **é‡å‘½å CEF ç›®å½•**
   ```
   åŸç›®å½•ï¼š3rd/cef/cef_binary_143.0.14+gdd46a37+chromium-143.0.7499.193_windows64/
   æ–°ç›®å½•ï¼š3rd/cef/win64/
   ```

2. **åˆ›å»ºç‰ˆæœ¬è¯´æ˜æ–‡ä»¶**
   ```
   3rd/cef/README.md
   è®°å½•å½“å‰ä½¿ç”¨çš„ CEF ç‰ˆæœ¬ä¿¡æ¯
   ```

3. **æœªæ¥æ‰©å±•**ï¼ˆå½“éœ€è¦æ”¯æŒå…¶ä»–å¹³å°æ—¶ï¼‰
   ```
   3rd/cef/linux64/    # ä¸‹è½½ Linux ç‰ˆæœ¬ CEF
   3rd/cef/macos/      # ä¸‹è½½ macOS ç‰ˆæœ¬ CEF
   ```

---

## ğŸ“ FindCEF.cmake è‡ªåŠ¨æ£€æµ‹å¹³å°

```cmake
# cmake/FindCEF.cmake

# æ£€æµ‹å¹³å°
if(WIN32)
    set(CEF_PLATFORM "win64")
elseif(UNIX AND NOT APPLE)
    set(CEF_PLATFORM "linux64")
elseif(APPLE)
    set(CEF_PLATFORM "macos")
else()
    message(FATAL_ERROR "Unsupported platform")
endif()

# è®¾ç½® CEF æ ¹ç›®å½•
set(CEF_ROOT "${CMAKE_SOURCE_DIR}/3rd/cef/${CEF_PLATFORM}")

# æ£€æŸ¥ç›®å½•æ˜¯å¦å­˜åœ¨
if(NOT EXISTS "${CEF_ROOT}")
    message(FATAL_ERROR 
        "CEF not found for ${CEF_PLATFORM}. "
        "Please download CEF and extract to: ${CEF_ROOT}")
endif()

# è®¾ç½® CEF è·¯å¾„
set(CEF_INCLUDE_PATH "${CEF_ROOT}/include")
set(CEF_LIBRARY_DEBUG "${CEF_ROOT}/Debug")
set(CEF_LIBRARY_RELEASE "${CEF_ROOT}/Release")
set(CEF_RESOURCES "${CEF_ROOT}/Resources")
set(CEF_LIBCEF_DLL_WRAPPER "${CEF_ROOT}/libcef_dll")

message(STATUS "Found CEF for ${CEF_PLATFORM}: ${CEF_ROOT}")
```

---

## ğŸ¯ ä¼˜åŠ¿

### 1. æ¸…æ™°çš„å¹³å°åŒºåˆ†
```
3rd/cef/
â”œâ”€â”€ win64/      â† ä¸€ç›®äº†ç„¶
â”œâ”€â”€ linux64/    â† æœªæ¥æ‰©å±•
â””â”€â”€ macos/      â† æœªæ¥æ‰©å±•
```

### 2. CMake è‡ªåŠ¨é€‰æ‹©
```cmake
# å¼€å‘è€…ä¸éœ€è¦å…³å¿ƒå¹³å°ï¼ŒCMake è‡ªåŠ¨é€‰æ‹©
find_package(CEF REQUIRED)  # è‡ªåŠ¨æ£€æµ‹å¹³å°å¹¶ä½¿ç”¨å¯¹åº”ç›®å½•
```

### 3. ç¬¦åˆå¼€æºæƒ¯ä¾‹
- âœ… Chromium: `third_party/*/win64`
- âœ… Qt: `3rdparty/*/windows_x64`
- âœ… Unreal: `ThirdParty/*/Win64`

### 4. ç‰ˆæœ¬ç®¡ç†æ¸…æ™°
```
3rd/cef/README.md
---
CEF Version: 143.0.14+gdd46a37+chromium-143.0.7499.193
Download Date: 2026-01-14
Download URL: https://cef-builds.spotifycdn.com/...
```

---

## ğŸ”„ è¿ç§»æ­¥éª¤

### Step 1: é‡å‘½åç›®å½•
```
å°†ï¼š3rd/cef/cef_binary_143.0.14+...
æ”¹ä¸ºï¼š3rd/cef/win64
```

### Step 2: åˆ›å»ºç‰ˆæœ¬è¯´æ˜
```
3rd/cef/README.md
```

### Step 3: æ›´æ–° .gitignore
```
# .gitignore
3rd/cef/win64/
3rd/cef/linux64/
3rd/cef/macos/
```

### Step 4: åˆ›å»ºä¸‹è½½è„šæœ¬ï¼ˆå¯é€‰ï¼‰
```bash
# scripts/download_cef.sh
PLATFORM="win64"
VERSION="143.0.14"
# è‡ªåŠ¨ä¸‹è½½å¹¶è§£å‹åˆ° 3rd/cef/${PLATFORM}/
```

---

## ğŸ“‹ å…¶ä»–ç¬¬ä¸‰æ–¹åº“çš„ç»„ç»‡

### Header-only åº“ï¼ˆä¸éœ€è¦å¹³å°åŒºåˆ†ï¼‰
```
3rd/json/single_include/nlohmann/json.hpp
3rd/asio/include/asio.hpp
```

### éœ€è¦ç¼–è¯‘çš„åº“ï¼ˆæŒ‰å¹³å°åŒºåˆ†ï¼‰
```
3rd/åº“å/
â”œâ”€â”€ win64/
â”‚   â”œâ”€â”€ lib/
â”‚   â””â”€â”€ include/
â”œâ”€â”€ linux64/
â””â”€â”€ macos/
```

---

## ğŸ¬ æ€»ç»“

**æ¨èç»“æ„**ï¼š
```
3rd/cef/
â”œâ”€â”€ win64/        â† é‡å‘½åä½ å½“å‰çš„ç›®å½•
â”œâ”€â”€ linux64/      â† æœªæ¥æ·»åŠ 
â”œâ”€â”€ macos/        â† æœªæ¥æ·»åŠ 
â””â”€â”€ README.md     â† ç‰ˆæœ¬è¯´æ˜
```

**ä¼˜ç‚¹**ï¼š
- âœ… ç¬¦åˆå¼€æºé¡¹ç›®æƒ¯ä¾‹
- âœ… å¹³å°åŒºåˆ†æ¸…æ™°
- âœ… CMake è‡ªåŠ¨æ£€æµ‹
- âœ… æ˜“äºæ‰©å±•åˆ°å…¶ä»–å¹³å°
- âœ… ç‰ˆæœ¬ç®¡ç†æ¸…æ™°

å‡†å¤‡å¥½äº†å—ï¼Ÿæˆ‘æ¥æ‰§è¡Œè°ƒæ•´ï¼
