
> **ç›®çš„**ï¼šå­¦ä¹ æˆç†Ÿé¡¹ç›®çš„è®¾è®¡å’Œå®ç°
> 
> **æ›´æ–°æ—¶é—´**ï¼š2025-12-31

---

## ğŸŒŸ æ¨èå‚è€ƒé¡¹ç›®ï¼ˆæŒ‰æ¨èåº¦æ’åºï¼‰

### ğŸ¥‡ 1. libtorrent (Rasterbar)

**é¡¹ç›®ä¿¡æ¯**ï¼š
- **è¯­è¨€**ï¼šC++
- **GitHub**ï¼šhttps://github.com/arvidn/libtorrent
- **æ–‡æ¡£**ï¼šhttps://www.libtorrent.org/
- **è®¸å¯è¯**ï¼šBSD
- **æ´»è·ƒåº¦**ï¼šâ­â­â­â­â­ï¼ˆéå¸¸æ´»è·ƒï¼‰

**ä¸ºä»€ä¹ˆæ¨è**ï¼š
- âœ… **æœ€æˆç†Ÿçš„ C++ BitTorrent åº“**
- âœ… è¢« qBittorrentã€Deluge ç­‰çŸ¥åå®¢æˆ·ç«¯ä½¿ç”¨
- âœ… å®Œæ•´å®ç° DHTã€ç£åŠ›é“¾æ¥ã€Peer åè®®
- âœ… ä»£ç è´¨é‡é«˜ï¼Œæ¶æ„æ¸…æ™°
- âœ… æ–‡æ¡£å®Œå–„ï¼Œæœ‰è¯¦ç»†çš„ API æ–‡æ¡£

**å¯ä»¥å­¦ä¹ çš„å†…å®¹**ï¼š
```
src/
â”œâ”€â”€ kademlia/          â† DHT å®ç°ï¼ˆKademlia ç®—æ³•ï¼‰
â”‚   â”œâ”€â”€ dht_tracker.cpp
â”‚   â”œâ”€â”€ routing_table.cpp
â”‚   â””â”€â”€ node.cpp
â”œâ”€â”€ peer_connection.cpp â† Peer è¿æ¥ç®¡ç†
â”œâ”€â”€ torrent.cpp        â† Torrent ç®¡ç†
â”œâ”€â”€ session.cpp        â† ä¼šè¯ç®¡ç†
â””â”€â”€ udp_socket.cpp     â† UDP å°è£…
```

**é‡ç‚¹å‚è€ƒ**ï¼š
- DHT è·¯ç”±è¡¨å®ç°ï¼ˆK-bucket ç®—æ³•ï¼‰
- Peer è¿æ¥çŠ¶æ€æœº
- å¼‚æ­¥ I/O æ¶æ„
- é”™è¯¯å¤„ç†æœºåˆ¶

**ä»£ç ç¤ºä¾‹ä½ç½®**ï¼š
- `examples/` - ç®€å•çš„ä½¿ç”¨ç¤ºä¾‹
- `test/` - å•å…ƒæµ‹è¯•ï¼ˆå¯ä»¥å­¦ä¹ å¦‚ä½•æµ‹è¯•ï¼‰

---

### ğŸ¥ˆ 2. transmission

**é¡¹ç›®ä¿¡æ¯**ï¼š
- **è¯­è¨€**ï¼šC/C++
- **GitHub**ï¼šhttps://github.com/transmission/transmission
- **å®˜ç½‘**ï¼šhttps://transmissionbt.com/
- **è®¸å¯è¯**ï¼šGPL/MIT
- **æ´»è·ƒåº¦**ï¼šâ­â­â­â­â­ï¼ˆéå¸¸æ´»è·ƒï¼‰

**ä¸ºä»€ä¹ˆæ¨è**ï¼š
- âœ… **è½»é‡çº§ï¼Œä»£ç ç®€æ´**
- âœ… è·¨å¹³å°ï¼ˆLinuxã€macOSã€Windowsï¼‰
- âœ… å®Œæ•´çš„ BitTorrent å®¢æˆ·ç«¯å®ç°
- âœ… ä»£ç å¯è¯»æ€§å¥½

**å¯ä»¥å­¦ä¹ çš„å†…å®¹**ï¼š
```
libtransmission/
â”œâ”€â”€ announcer.c        â† Tracker é€šä¿¡
â”œâ”€â”€ peer-mgr.c         â† Peer ç®¡ç†
â”œâ”€â”€ tr-dht.c           â† DHT å®ç°
â”œâ”€â”€ magnet.c           â† ç£åŠ›é“¾æ¥è§£æ
â””â”€â”€ session.c          â† ä¼šè¯ç®¡ç†
```

**é‡ç‚¹å‚è€ƒ**ï¼š
- ç£åŠ›é“¾æ¥è§£æï¼ˆ`magnet.c`ï¼‰
- Tracker åè®®å®ç°
- ç®€æ´çš„æ¶æ„è®¾è®¡

---

### ğŸ¥‰ 3. qBittorrent

**é¡¹ç›®ä¿¡æ¯**ï¼š
- **è¯­è¨€**ï¼šC++/Qt
- **GitHub**ï¼šhttps://github.com/qbittorrent/qBittorrent
- **å®˜ç½‘**ï¼šhttps://www.qbittorrent.org/
- **è®¸å¯è¯**ï¼šGPL
- **æ´»è·ƒåº¦**ï¼šâ­â­â­â­â­ï¼ˆéå¸¸æ´»è·ƒï¼‰

**ä¸ºä»€ä¹ˆæ¨è**ï¼š
- âœ… **å®Œæ•´çš„å®¢æˆ·ç«¯å®ç°**ï¼ˆåŒ…æ‹¬ GUIï¼‰
- âœ… åŸºäº libtorrentï¼Œå¯ä»¥å­¦ä¹ å¦‚ä½•ä½¿ç”¨åº“
- âœ… æœ‰ Web UIï¼Œå¯ä»¥å­¦ä¹  API è®¾è®¡

**å¯ä»¥å­¦ä¹ çš„å†…å®¹**ï¼š
```
src/
â”œâ”€â”€ base/
â”‚   â”œâ”€â”€ bittorrent/    â† BitTorrent æ ¸å¿ƒé€»è¾‘
â”‚   â””â”€â”€ net/           â† ç½‘ç»œå±‚
â””â”€â”€ webui/             â† Web API è®¾è®¡
```

**é‡ç‚¹å‚è€ƒ**ï¼š
- å¦‚ä½•ä½¿ç”¨ libtorrent
- Web API è®¾è®¡ï¼ˆå¦‚æœä½ è¦åš GUIï¼‰
- é…ç½®ç®¡ç†

---

### ğŸ–ï¸ 4. libutp (uTorrent Transport Protocol)

**é¡¹ç›®ä¿¡æ¯**ï¼š
- **è¯­è¨€**ï¼šC++
- **GitHub**ï¼šhttps://github.com/bittorrent/libutp
- **è®¸å¯è¯**ï¼šMIT
- **æ´»è·ƒåº¦**ï¼šâ­â­â­ï¼ˆä¸­ç­‰ï¼‰

**ä¸ºä»€ä¹ˆæ¨è**ï¼š
- âœ… **ä¸“æ³¨äºä¼ è¾“å±‚åè®®**
- âœ… å®ç°äº† uTPï¼ˆåŸºäº UDP çš„å¯é ä¼ è¾“ï¼‰
- âœ… ä»£ç ç®€æ´ï¼Œæ˜“äºç†è§£

**å¯ä»¥å­¦ä¹ çš„å†…å®¹**ï¼š
- UDP å¯é ä¼ è¾“å®ç°
- æ‹¥å¡æ§åˆ¶ç®—æ³•
- ç½‘ç»œç¼–ç¨‹æŠ€å·§

---

### ğŸ–ï¸ 5. aria2

**é¡¹ç›®ä¿¡æ¯**ï¼š
- **è¯­è¨€**ï¼šC++
- **GitHub**ï¼šhttps://github.com/aria2/aria2
- **å®˜ç½‘**ï¼šhttps://aria2.github.io/
- **è®¸å¯è¯**ï¼šGPL
- **æ´»è·ƒåº¦**ï¼šâ­â­â­â­ï¼ˆæ´»è·ƒï¼‰

**ä¸ºä»€ä¹ˆæ¨è**ï¼š
- âœ… **æ”¯æŒå¤šç§åè®®**ï¼ˆHTTPã€FTPã€BitTorrentã€ç£åŠ›é“¾æ¥ï¼‰
- âœ… å‘½ä»¤è¡Œå·¥å…·ï¼Œæ¶æ„æ¸…æ™°
- âœ… æœ‰ RPC æ¥å£

**å¯ä»¥å­¦ä¹ çš„å†…å®¹**ï¼š
```
src/
â”œâ”€â”€ BtRegistry.cc      â† BitTorrent æ³¨å†Œè¡¨
â”œâ”€â”€ DHTPeerAnnounceStorage.cc â† DHT Peer å­˜å‚¨
â”œâ”€â”€ DHTRoutingTable.cc â† DHT è·¯ç”±è¡¨
â””â”€â”€ MagnetUri.cc       â† ç£åŠ›é“¾æ¥è§£æ
```

**é‡ç‚¹å‚è€ƒ**ï¼š
- å¤šåè®®æ¶æ„è®¾è®¡
- RPC æ¥å£è®¾è®¡
- å‘½ä»¤è¡Œå‚æ•°å¤„ç†

---

### ğŸ–ï¸ 6. libtorrent (Rakshasa)

**é¡¹ç›®ä¿¡æ¯**ï¼š
- **è¯­è¨€**ï¼šC++
- **GitHub**ï¼šhttps://github.com/rakshasa/libtorrent
- **è®¸å¯è¯**ï¼šGPL
- **æ´»è·ƒåº¦**ï¼šâ­â­â­ï¼ˆä¸­ç­‰ï¼‰

**æ³¨æ„**ï¼š
- âš ï¸ ä¸ libtorrent-rasterbar æ˜¯**ä¸åŒçš„é¡¹ç›®**
- è¢« rTorrent ä½¿ç”¨

**ä¸ºä»€ä¹ˆå‚è€ƒ**ï¼š
- âœ… å¦ä¸€ç§æ¶æ„è®¾è®¡æ€è·¯
- âœ… æ›´åº•å±‚çš„å®ç°

---

## ğŸ“š åè®®è§„èŒƒå’Œæ–‡æ¡£

### å®˜æ–¹ BEPï¼ˆBitTorrent Enhancement Proposalsï¼‰

**ç½‘ç«™**ï¼šhttp://www.bittorrent.org/beps/bep_0000.html

**é‡è¦çš„ BEP**ï¼š

| BEP | æ ‡é¢˜ | è¯´æ˜ |
|-----|------|------|
| BEP 3 | The BitTorrent Protocol Specification | BitTorrent åè®®è§„èŒƒ |
| BEP 5 | DHT Protocol | DHT åè®®è§„èŒƒ |
| BEP 9 | Extension for Peers to Send Metadata Files | å…ƒæ•°æ®æ‰©å±• |
| BEP 10 | Extension Protocol | æ‰©å±•åè®® |
| BEP 29 | uTorrent transport protocol | uTP åè®® |
| BEP 52 | The BitTorrent Protocol Specification v2 | BitTorrent v2 |

**å¿…è¯»**ï¼š
- **BEP 3** - ç†è§£ BitTorrent åŸºç¡€åè®®
- **BEP 5** - ç†è§£ DHT ç½‘ç»œ
- **BEP 9** - ç†è§£å¦‚ä½•ä»ç£åŠ›é“¾æ¥è·å–å…ƒæ•°æ®

---

## ğŸ” ä»£ç å‚è€ƒå»ºè®®

### æŒ‰æ¨¡å—å‚è€ƒä¸åŒé¡¹ç›®

#### 1. UDP å®¢æˆ·ç«¯
**æ¨èå‚è€ƒ**ï¼šlibtorrent-rasterbar
- æ–‡ä»¶ï¼š`src/udp_socket.cpp`
- ç‰¹ç‚¹ï¼šå®Œå–„çš„å¼‚æ­¥ UDP å°è£…

#### 2. DHT å®ç°
**æ¨èå‚è€ƒ**ï¼šlibtorrent-rasterbar
- ç›®å½•ï¼š`src/kademlia/`
- æ–‡ä»¶ï¼š
  - `routing_table.cpp` - è·¯ç”±è¡¨ï¼ˆK-bucketï¼‰
  - `dht_tracker.cpp` - DHT ä¸»é€»è¾‘
  - `node.cpp` - DHT èŠ‚ç‚¹
- ç‰¹ç‚¹ï¼šå®Œæ•´çš„ Kademlia å®ç°

**æ¬¡è¦å‚è€ƒ**ï¼šaria2
- æ–‡ä»¶ï¼š`src/DHTRoutingTable.cc`
- ç‰¹ç‚¹ï¼šæ›´ç®€æ´çš„å®ç°

#### 3. ç£åŠ›é“¾æ¥è§£æ
**æ¨èå‚è€ƒ**ï¼štransmission
- æ–‡ä»¶ï¼š`libtransmission/magnet.c`
- ç‰¹ç‚¹ï¼šç®€æ´æ¸…æ™°

**æ¬¡è¦å‚è€ƒ**ï¼šaria2
- æ–‡ä»¶ï¼š`src/MagnetUri.cc`
- ç‰¹ç‚¹ï¼šC++ å®ç°

#### 4. Bencode ç¼–è§£ç 
**æ¨èå‚è€ƒ**ï¼šlibtorrent-rasterbar
- æ–‡ä»¶ï¼š`src/bencode.cpp`
- ç‰¹ç‚¹ï¼šé«˜æ€§èƒ½å®ç°

**æ¬¡è¦å‚è€ƒ**ï¼štransmission
- æ–‡ä»¶ï¼š`libtransmission/variant.c`
- ç‰¹ç‚¹ï¼šç®€å•æ˜“æ‡‚

#### 5. Peer è¿æ¥ç®¡ç†
**æ¨èå‚è€ƒ**ï¼šlibtorrent-rasterbar
- æ–‡ä»¶ï¼š`src/peer_connection.cpp`
- ç‰¹ç‚¹ï¼šå®Œæ•´çš„çŠ¶æ€æœºå®ç°

#### 6. é…ç½®ç®¡ç†
**æ¨èå‚è€ƒ**ï¼šqBittorrent
- ç›®å½•ï¼š`src/base/preferences.cpp`
- ç‰¹ç‚¹ï¼šå®Œå–„çš„é…ç½®ç³»ç»Ÿ

---

## ğŸ› ï¸ å­¦ä¹ è·¯å¾„å»ºè®®

### é˜¶æ®µ 1ï¼šç†è§£åè®®ï¼ˆ1-2å¤©ï¼‰
1. é˜…è¯» **BEP 3**ï¼ˆBitTorrent åè®®ï¼‰
2. é˜…è¯» **BEP 5**ï¼ˆDHT åè®®ï¼‰
3. é˜…è¯» **BEP 9**ï¼ˆå…ƒæ•°æ®æ‰©å±•ï¼‰

### é˜¶æ®µ 2ï¼šå­¦ä¹ æ¶æ„ï¼ˆ2-3å¤©ï¼‰
1. æµè§ˆ **libtorrent-rasterbar** çš„æ•´ä½“æ¶æ„
2. é˜…è¯» `examples/` ç›®å½•çš„ç¤ºä¾‹ä»£ç 
3. ç†è§£æ¨¡å—åˆ’åˆ†å’Œä¾èµ–å…³ç³»

### é˜¶æ®µ 3ï¼šæ·±å…¥æ¨¡å—ï¼ˆæŒ‰éœ€ï¼‰
1. **UDP å®¢æˆ·ç«¯**ï¼šå‚è€ƒ `udp_socket.cpp`
2. **DHT å®ç°**ï¼šå‚è€ƒ `kademlia/` ç›®å½•
3. **Bencode**ï¼šå‚è€ƒ `bencode.cpp`
4. **ç£åŠ›é“¾æ¥**ï¼šå‚è€ƒ transmission çš„ `magnet.c`

---

## ğŸ“– æ¨èé˜…è¯»é¡ºåº

### å¦‚æœä½ æ˜¯åˆå­¦è€…

```
1. transmission/magnet.c
   â†“ (æœ€ç®€å•ï¼Œç†è§£ç£åŠ›é“¾æ¥)
   
2. libtorrent/bencode.cpp
   â†“ (ç†è§£ Bencode ç¼–è§£ç )
   
3. libtorrent/udp_socket.cpp
   â†“ (ç†è§£ UDP å°è£…)
   
4. libtorrent/kademlia/routing_table.cpp
   â†“ (ç†è§£ DHT è·¯ç”±è¡¨)
   
5. libtorrent/kademlia/dht_tracker.cpp
   â†“ (ç†è§£ DHT å®Œæ•´å®ç°)
```

### å¦‚æœä½ æœ‰ç»éªŒ

```
ç›´æ¥é˜…è¯» libtorrent-rasterbar çš„æ ¸å¿ƒæ¨¡å—ï¼š
- src/kademlia/        (DHT)
- src/peer_connection.cpp (Peer)
- src/torrent.cpp      (Torrent ç®¡ç†)
- src/session.cpp      (ä¼šè¯ç®¡ç†)
```

---

## ğŸ”— æœ‰ç”¨çš„èµ„æºé“¾æ¥

### å®˜æ–¹æ–‡æ¡£
- **BitTorrent åè®®è§„èŒƒ**ï¼šhttp://www.bittorrent.org/beps/bep_0003.html
- **DHT åè®®è§„èŒƒ**ï¼šhttp://www.bittorrent.org/beps/bep_0005.html
- **libtorrent æ–‡æ¡£**ï¼šhttps://www.libtorrent.org/reference.html

### æ•™ç¨‹å’Œæ–‡ç« 
- **Building a BitTorrent client from scratch**ï¼šhttps://blog.jse.li/posts/torrent/
- **DHT åè®®è¯¦è§£**ï¼šhttps://www.cnblogs.com/LittleHann/p/6180296.html
- **Kademlia ç®—æ³•è¯¦è§£**ï¼šhttps://pdos.csail.mit.edu/~petar/papers/maymounkov-kademlia-lncs.pdf

### åœ¨çº¿å·¥å…·
- **Bencode åœ¨çº¿ç¼–è§£ç **ï¼šhttps://chocobo1.github.io/bencode_online/
- **ç£åŠ›é“¾æ¥è§£æå™¨**ï¼šhttps://magnet2torrent.com/

---

## ğŸ’¡ å‚è€ƒå»ºè®®

### ä¸è¦å®Œå…¨ç…§æŠ„

**åŸå› **ï¼š
- å­¦ä¹ æ¶æ„æ€æƒ³ï¼Œè€Œä¸æ˜¯å¤åˆ¶ä»£ç 
- ç†è§£ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡
- æ ¹æ®è‡ªå·±çš„éœ€æ±‚è°ƒæ•´

### é‡ç‚¹å…³æ³¨

1. **æ¶æ„è®¾è®¡**
   - æ¨¡å—åˆ’åˆ†
   - æ¥å£è®¾è®¡
   - ä¾èµ–å…³ç³»

2. **é”™è¯¯å¤„ç†**
   - å¦‚ä½•å¤„ç†ç½‘ç»œé”™è¯¯
   - å¦‚ä½•å¤„ç†åè®®é”™è¯¯
   - å¦‚ä½•æ¢å¤

3. **æ€§èƒ½ä¼˜åŒ–**
   - å†…å­˜ç®¡ç†
   - å¹¶å‘æ§åˆ¶
   - ç¼“å­˜ç­–ç•¥

4. **æµ‹è¯•æ–¹æ³•**
   - å•å…ƒæµ‹è¯•
   - é›†æˆæµ‹è¯•
   - æ€§èƒ½æµ‹è¯•

---

## ğŸ¯ é’ˆå¯¹ä½ çš„é¡¹ç›®

### å½“å‰é˜¶æ®µï¼ˆUDP å®¢æˆ·ç«¯ï¼‰

**æ¨èå‚è€ƒ**ï¼š
1. **libtorrent-rasterbar/src/udp_socket.cpp**
   - å­¦ä¹ å¼‚æ­¥ UDP å°è£…
   - å­¦ä¹ é”™è¯¯å¤„ç†

2. **asio å®˜æ–¹ç¤ºä¾‹**
   - `asio/src/examples/cpp11/echo/async_udp_echo_server.cpp`
   - å­¦ä¹  asio çš„æ­£ç¡®ç”¨æ³•

### ä¸‹ä¸€é˜¶æ®µï¼ˆDHT å®¢æˆ·ç«¯ï¼‰

**æ¨èå‚è€ƒ**ï¼š
1. **libtorrent-rasterbar/src/kademlia/**
   - å®Œæ•´çš„ DHT å®ç°
   - K-bucket ç®—æ³•

2. **BEP 5 åè®®è§„èŒƒ**
   - ç†è§£ DHT æ¶ˆæ¯æ ¼å¼
   - ç†è§£æŸ¥è¯¢æµç¨‹

### å†ä¸‹ä¸€é˜¶æ®µï¼ˆPeer ç®¡ç†ï¼‰

**æ¨èå‚è€ƒ**ï¼š
1. **libtorrent-rasterbar/src/peer_connection.cpp**
   - Peer çŠ¶æ€æœº
   - åè®®æ¶ˆæ¯å¤„ç†

2. **BEP 3 åè®®è§„èŒƒ**
   - ç†è§£ BitTorrent åè®®

---

## ğŸ“ æ€»ç»“

### æœ€æ¨èçš„é¡¹ç›®

**å­¦ä¹ æ¶æ„**ï¼šlibtorrent-rasterbar
**å­¦ä¹ ç®€æ´å®ç°**ï¼štransmission
**å­¦ä¹ å®Œæ•´å®¢æˆ·ç«¯**ï¼šqBittorrent

### å­¦ä¹ æ–¹æ³•

1. **å…ˆçœ‹æ–‡æ¡£**ï¼ˆBEP è§„èŒƒï¼‰
2. **å†çœ‹ä»£ç **ï¼ˆå‚è€ƒé¡¹ç›®ï¼‰
3. **åŠ¨æ‰‹å®ç°**ï¼ˆä½ çš„é¡¹ç›®ï¼‰
4. **å¯¹æ¯”ä¼˜åŒ–**ï¼ˆæ”¹è¿›è®¾è®¡ï¼‰

### æ³¨æ„äº‹é¡¹

- âš ï¸ ä¸è¦é™·å…¥ç»†èŠ‚ï¼Œå…ˆç†è§£æ•´ä½“
- âš ï¸ ä¸è¦å®Œå…¨ç…§æŠ„ï¼Œç†è§£åŸç†
- âš ï¸ æ³¨æ„è®¸å¯è¯å…¼å®¹æ€§
- âš ï¸ å‚è€ƒå¤šä¸ªé¡¹ç›®ï¼Œå–é•¿è¡¥çŸ­

---

**ç¥ä½ å­¦ä¹ é¡ºåˆ©ï¼æœ‰é—®é¢˜éšæ—¶é—®æˆ‘ã€‚**
